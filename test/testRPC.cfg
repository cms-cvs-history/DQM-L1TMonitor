
process ecalde = {

    include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
    replace MessageLogger.destinations = { "log.txt" }
   
    untracked PSet maxEvents = { untracked int32 input = -1}
 
        source = PoolSource{
                untracked vstring fileNames={
                "file:/tmp/fruboes/digis.root"
                #"rfio:/castor/cern.ch/user/f/fruboes/CMSSW200/NoeProd1/digi_48.root"
                }
        }


   
 #######################################################################
                          ##  DQM SERVICES
#######################################################################
include "DQMServices/Core/data/DQM.cfg"

include "DQMServices/Components/test/dqm_onlineEnv.cfi"
     replace dqmSaver.convention       = "Online"
     replace dqmSaver.dirName          = "."
     replace dqmSaver.producer         = "DQM"
     replace dqmEnv.subSystemFolder    = "L1T"
    

  include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"
  include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
  include "Geometry/RPCGeometry/data/rpcGeometry.cfi"

#  include "L1TriggerConfig/RPCTriggerConfig/data/RPCPatSource.cfi"

#  include "L1Trigger/GlobalMuonTrigger/data/gmtDigis.cff"
#  include "L1Trigger/GlobalMuonTrigger/data/gmtDigis.cfi"

#  replace gmtDigis.DTCandidates = l1dummy:DT
#  replace gmtDigis.CSCCandidates = l1dummy:CSC
#  replace gmtDigis.MipIsoData = l1dummy

  /* GMT */

include "L1TriggerConfig/L1GtConfigProducers/data/L1GtConfig.cff"
include "L1TriggerConfig/L1ScalesProducers/data/L1MuTriggerScalesConfig.cff"
include "L1TriggerConfig/L1ScalesProducers/data/L1MuGMTScalesConfig.cff"
include "L1TriggerConfig/GMTConfigProducers/data/L1MuGMTParametersConfig.cff"

### emulator

#include "L1Trigger/GlobalMuonTrigger/data/gmtDigis.cfi"
module gmtDigis = L1MuGlobalMuonTrigger {
    InputTag DTCandidates   = gtUnpack:DT   //dttfDigis:DT
    InputTag CSCCandidates  = gtUnpack:CSC  //csctfDigis:CSC
    InputTag RPCbCandidates = gtUnpack:RPCb //rpcTriggerDigis:RPCb
    InputTag RPCfCandidates = gtUnpack:RPCf //rpcTriggerDigis:RPCf
    InputTag MipIsoData = rctDigis
    untracked int32 Debug   = 0
    int32 BX_min            = -4            // bx's to be processed
    int32 BX_max            =  4
    int32 BX_min_readout    = -1            // bx's to be readout
    int32 BX_max_readout    =  1
    untracked bool WriteLUTsAndRegs = false
}

### unpacking

#include "EventFilter/L1GlobalTriggerRawToDigi/data/l1GtUnpack.cfi"
module gtUnpack = L1GlobalTriggerRawToDigi {
    InputTag DaqGtInputTag = source
    //untracked InputTag DaqGtInputTag = "rawDataCollector"
    untracked int32 DaqGtFedId = 813
    uint32 ActiveBoardsMask = 0xFFFF //65535
    int32 UnpackBxInEvent = -1
}









  # include "L1TriggerConfig/RPCTriggerConfig/data/RPCHwConfigSource.cfi"

        module l1trpctf = L1TRPCTF{
          untracked bool verbose = false
          untracked bool MonitorDaemon = true
          untracked bool DaqMonitorBEInterface = true
   #       untracked string outputFile ="./L1TDQM.root"
          untracked string outputFile =""
          InputTag rpctfSource = gtUnpack
          InputTag rpctfRPCDigiSource = rpcunpacker
        }




    include "DQM/L1TMonitorClient/data/L1TRPCTFClient.cff"
    replace l1trpctfClient.verbose = true

#   module l1trpctfClient = L1TRPCTFClient {
#       untracked string input_dir = "L1T/L1TRPCTF"
#       untracked string output_dir = "L1T/L1TRPCTFClient"
#       untracked int32 prescaleEvt = 1
#       untracked bool verbose = false
#
#   }
#   module l1tRPCTFqTester = QualityTester {
#     untracked FileInPath qtList = "DQM/L1TMonitorClient/test/rpcTFQualityTests.xml"
#     untracked bool getQualityTestsFromFile = true
#     //untracked int32 QualityTestPrescaler = 500
#   }
    
  #  path p ={l1dummy , gmtDigis  , l1trpctf,   l1trpctfqTester, l1trpctfClient , dqmEnv, dqmSaver }
    path p ={gtUnpack, gmtDigis, l1trpctf,   l1trpctfqTester, l1trpctfClient , dqmEnv, dqmSaver }

    
#    module outputEvents = PoolOutputModule {
#    	untracked string fileName = "ecaltest.root"
#        untracked vstring outputCommands = {"keep *"}
#    }
#    endpath outpath = { outputEvents }
    
}
